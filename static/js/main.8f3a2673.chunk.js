(this.webpackJsonpexchallenge=this.webpackJsonpexchallenge||[]).push([[0],{74:function(e,t,n){e.exports=n(84)},84:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(9),c=n.n(o),u=n(142),i=n(141),l=n(44),s=n(30),p=n(57),f=n(7),m={EUR:"\u20ac",USD:"$",GBP:"\xa3"},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return parseFloat(e.toFixed(t))},g=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=r[t],c=r[n],u=e/o*c;return y(u,a)},b=function(e){return m[e]},O="FETCH_RATES_START",h="FETCH_RATES_SUCCESS",d="FETCH_RATES_FAIL",v="SET_CURRENCY_FROM",E="SET_CURRENCY_TO",j="SET_AMOUNT_FROM",w="SET_AMOUNT_TO",C="TOGGLE_REVERSE",P="UPDATE_POCKET",T=function(){return function(e,t){var n=t(),r=n.display,a=n.rates,o=r.currencyFrom,c=r.currencyTo,u=r.amountFrom,i=r.amountTo;if(r.reverse){var l=g(i,c,o,a);e({type:j,amount:l})}else{var s=g(u,o,c,a);e({type:w,amount:s})}}},F=function(e){return function(t,n){var r=n().display.reverse;""!==e&&0!==e||t({type:r?j:w,amount:e}),t({type:r?w:j,amount:e}),t(T())}},S=function(e,t){return function(n){n({type:P,currency:e,amount:t})}},k=function(e){return function(t){t({type:C,reverse:e})}};function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R={EUR:1e3,USD:1e3,GBP:1e3},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D({},R),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:var n=t.currency,r=t.amount;return D({},e,Object(f.a)({},n,r));default:return e}};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N={currencyFrom:"EUR",currencyTo:"GBP",amountFrom:0,amountTo:0,reverse:!1},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U({},N),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return U({},e,{currencyFrom:t.currency});case E:return U({},e,{currencyTo:t.currency});case j:return U({},e,{amountFrom:t.amount});case w:return U({},e,{amountTo:t.amount});case C:return U({},e,{reverse:t.reverse});default:return e}};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:var n=t.rates;return L({},e,{},n);default:return e}},W=n(140),G=n(46),Y=n(144),V=n(139),z=n(38),H=n(22),J=n(58),$=n(59),q=n(62),K=n(21),Q=n(60),X=n(131),Z=n(138),ee=n(143),te=Object(Q.a)((function(e){return{amountInput:{"& .MuiInputBase-input":{textAlign:"right",fontSize:e.spacing(4)}}}})),ne=function(e){var t=e.label,n=e.helperText,o=e.startAdornment,c=e.error,u=e.currentValue,i=e.autoFocus,l=e.toggleFocus,s=e.onChangeAmount,p=Object(r.useState)(String(u)),f=Object(K.a)(p,2),m=f[0],y=f[1];Object(r.useEffect)((function(){y(String(u))}),[u]);var g=te(),b={autoFocus:i,value:m,label:t,onChange:function(e){var t=e.target,n=t.value;t.validity.valid&&(y(n),s(parseFloat(n||0)))},onFocus:function(){return l(!i)},helperText:n,error:c};return a.a.createElement(ee.a,Object.assign({},b,{className:"".concat(g.textField," ").concat(g.amountInput),fullWidth:!0,margin:"normal",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:"false",variant:"outlined",type:"text",inputProps:{pattern:"[0-9]+\\.?([0-9]{1,2})?"},InputProps:{startAdornment:o}}))},re=n(129),ae=n(130),oe=function(e){var t=e.swapCurrencies;return a.a.createElement(re.a,{color:"secondary",onClick:t},a.a.createElement(ae.a,null,"unfold_more"))},ce=n(132),ue=Object(Q.a)((function(e){return{grid:{marginTop:e.spacing(2.5)},fab:{margin:e.spacing(1),paddingLeft:"15%",paddingRight:"15%"}}})),ie=function(e){var t=e.onClick,n=e.disabled,r=ue();return a.a.createElement(X.a,{container:!0,justify:"center",className:r.grid},a.a.createElement(ce.a,{variant:"extended",color:"secondary","aria-label":"exchange",className:r.fab,onClick:t,disabled:n},"Exchange"))},le=n(137),se=n(146),pe=n(136),fe=n(134),me=n(135),ye=n(133),ge=function(e){var t=e.start,n=e.onConfirm,o=e.text,c=e.title,u=e.button,i=Object(r.useState)(t),l=Object(K.a)(i,2),s=l[0],p=l[1];Object(r.useEffect)((function(){p(t)}),[t]);var f=function(e){p(!1),n(e)};return a.a.createElement(se.a,{open:s,onClose:function(){return f(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},a.a.createElement(ye.a,{color:"primary",id:"alert-dialog-title"},c),a.a.createElement(fe.a,null,a.a.createElement(me.a,{id:"alert-dialog-description"},o)),a.a.createElement(pe.a,null,a.a.createElement(le.a,{onClick:function(){return f(!0)},color:"primary"},u)))},be=n(147),Oe=Object(Q.a)((function(e){return{menu:{width:100,"& .MuiInput-formControl":{fontSize:e.spacing(4)}}}})),he=function(e){var t=e.availableCurrencies,n=e.onCurrencyChange,r=e.currency,o=Oe(),c=t.map((function(e){return a.a.createElement(be.a,{key:e,value:e},e)}));return a.a.createElement(ee.a,{select:!0,className:o.menu,value:r,onChange:function(e){return n(e)},SelectProps:{disableUnderline:!0,MenuProps:{className:o.menu}},margin:"normal"},c)},de=Object(Q.a)((function(e){return{padding:{padding:e.spacing(1.5)},swap:{width:48,margin:"auto"}}})),ve=function(e){var t=e.onChangeAmount,n=e.onCurrencyChange,o=e.fetchLatestRates,c=e.swapCurrencies,u=e.toggleFocus,i=e.onExchange,l=e.pockets,s=e.display,p=e.rates,f=e.error,m=de(),O=s.amountFrom,h=s.amountTo,d=s.currencyFrom,v=s.currencyTo,E=Object.keys(l),j=function(e){return"You have ".concat(b(e)).concat(y(l[e]))},w=function(e,t){return"1".concat(b(e)," = ").concat(b(t)).concat(g(1,e,t,p,4))},C=function(e,t){return a.a.createElement(Z.a,{position:"start"},a.a.createElement(he,{availableCurrencies:E,onCurrencyChange:function(e){return n(e,t)},currency:e}))},P=Object(r.useState)(!1),T=Object(K.a)(P,2),F=T[0],S=T[1],k=function(){return O>l[d]};return a.a.createElement(r.Fragment,null,a.a.createElement(X.a,{className:m.padding,item:!0},a.a.createElement(ne,{startAdornment:C(d),onChangeAmount:t,label:j(d),helperText:w(d,v),currentValue:O,error:k(),toggleFocus:u,autoFocus:!0})),a.a.createElement(X.a,{className:m.swap,item:!0},a.a.createElement(oe,{swapCurrencies:c})),a.a.createElement(X.a,{className:m.padding,item:!0},a.a.createElement(ne,{label:j(v),helperText:w(v,d),onChangeAmount:function(e){return t(e,!0)},startAdornment:C(v,!0),currentValue:h,toggleFocus:u}),a.a.createElement(ie,{disabled:!O||k(),onClick:function(){return S(!0)}})),a.a.createElement(ge,{title:"Confirm Exchange",start:F,onConfirm:function(e){S(!1),e&&i()},button:"Ok",text:"Please confirm exchange\n            of ".concat(O).concat(d," \n            to ").concat(h).concat(v)}),a.a.createElement(ge,{title:"Error",start:f,onConfirm:function(e){return e&&o()},button:"Retry",text:"Oops, something went wrong!"}))};function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var je=function(e){function t(){var e,n;Object(z.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(J.a)(this,(e=Object($.a)(t)).call.apply(e,[this].concat(a)))).tick=function(){n.props.fetchLatestRates()},n}return Object(q.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){return a.a.createElement(ve,this.props)}},{key:"componentDidMount",value:function(){this.props.fetchLatestRates(),this.timer=setInterval(this.tick,1e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}}]),t}(r.Component),we=Object(l.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)}),(function(e){return{onCurrencyChange:function(t,n){e(function(e,t){return function(n,r){var a=r().display,o=a.currencyFrom,c=a.currencyTo;t||e!==c||n({type:E,currency:o}),t&&e===o&&n({type:v,currency:c}),n({type:t?E:v,currency:e}),n(T())}}(t.target.value,n))},onChangeAmount:function(t){e(F(t))},swapCurrencies:function(){e((function(e,t){var n=t().display,r=n.currencyFrom,a=n.currencyTo,o=n.amountFrom,c=n.amountTo,u=n.reverse;e({type:E,currency:r}),e({type:v,currency:a}),e({type:w,amount:o}),e({type:j,amount:c}),e(k(!u))}))},onExchange:function(){e((function(e,t){var n=t(),r=n.pockets,a=n.display,o=a.currencyFrom,c=a.currencyTo,u=a.amountFrom,i=a.amountTo,l=r[o],s=r[c];if(u&&l>=u){var p=s+i;e(S(o,l-u)),e(S(c,p)),e(F(0))}}))},fetchLatestRates:function(){e((function(e){return e({type:O}),fetch("https://openexchangerates.org/api/latest.json?app_id=160050003baf43aaac35c80b3cf145a0").then((function(e){return e.json()})).then((function(t){e({type:h,rates:t.rates}),e(T())})).catch((function(t){e({type:d}),console.warn(t)}))}))},toggleFocus:function(t){e(k(t))}}}))(je);function Ce(){return a.a.createElement(G.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",a.a.createElement(V.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var Pe=n(45),Te=n(61),Fe=Object(Te.a)({palette:{error:{main:Pe.a.A400},background:{default:"#fff"}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(l.a,{store:Object(s.d)(Object(s.c)({pockets:A,display:I,rates:B,error:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;return e.type===d}}),Object(s.a)(p.a))},a.a.createElement(i.a,{theme:Fe},a.a.createElement(u.a,null),a.a.createElement((function(){return a.a.createElement(W.a,{maxWidth:"sm"},a.a.createElement(Y.a,{my:4},a.a.createElement(G.a,{variant:"h4",component:"h1",gutterBottom:!0},"Exchallenge"),a.a.createElement(we,null),a.a.createElement(Ce,null)))}),null))),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[74,1,2]]]);
//# sourceMappingURL=main.8f3a2673.chunk.js.map